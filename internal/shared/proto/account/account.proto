syntax = "proto3";

package three_kingdoms.account;

import "common/common.proto";

// Go 包路径指向生成目录（internal/shared/gen/...），由 internal/scripts/gen-proto.sh 生成。
option go_package = "ThreeKingdoms/internal/shared/gen/account;accountpb";

// 账号相关接口（当前覆盖 login/register/enterServer，后续可在同一个服务里继续扩展）。
service AccountService {
  // 登录
  rpc Login(LoginRequest) returns (LoginReply);

  // 注册
  rpc Register(RegisterRequest) returns (RegisterReply);

}

message LoginRequest {
  string username = 1;
  string password = 2;
  string ip = 3;
  string hardware = 4;
}

message LoginReply {
  common.BizResult result = 1;
  string session = 2; // token
  int32 uid = 3;

  // 以下字段当前在 ws login 响应里存在（为兼容协议先保留）
  string username = 4;
  string password = 5;
}

message RegisterRequest {
  string username = 1;
  string password = 2;
  string hardware = 3;
}

message RegisterReply {
  common.BizResult result = 1;
}